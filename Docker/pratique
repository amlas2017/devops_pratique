// Script pour installer automatiquement docker
curl -sSL https://get.docker.com/ | sh    !!!! ERROR

// Ajout d'un user au groupe docker
sudo gpasswd -a vagrant docker   +   redémarrer
ou  usermod -aG docker vagrant   +   redémarrage

// docker commit
docker commit <CONTAINER ID> <new name for the container>  
  -----> permet d'enregistrer des modifs en créant une new image(pas un new container)

//Id d'un container
$ docker ps | grep 9092 | awk '{print $1}'

// API docker (socket)
sudo nano /etc/init/docker.conf  ou /etc/default/docker 
DOCKER_OPTS='-H tcp://0.0.0.0:4243 -H unix:///var/run/docker.sock'
sudo service docker restart
curl -X GET http://<Docker server IP>:4243/images/json

// Lister tous les noms des containers
sudo docker ps -a --format '{{ .Names }}'

// Infos sur le container (addresse ip ......)
sudo docker inspect id_container 

// Lister l'IP d'un container:
docker inspect -f {{.NetworkSettings.IPAddress}} id_du_container

// Une fois un container est arrété , on ne peut pas le relancer par RUN. On utilise alors la commande START et ensuite EXEC
sudo docker start ubuntu
sudo docker exec -it ubuntu /bin/bash  (attention pas de "/" à la fin de /bin/bash)

// Faire un commit sur image docker et un push vers docker hub
sudo vim Dockerfile  // update Dockerfile
sudo docker build -t mon_ubuntu .  // create image
sudo docker run -it --name mon_ubuntu_ps mon_ubuntu   // pour avoir un ID du container
sudo docker ps -a
sudo docker commit 03b1734fb20b docker.io/amlas/mon_ubuntu  //Faut respecter le format docker hub .../.../....
sudo docker login       // GitLab offre un service REGISTRY DOCKER 
sudo docker push docker.io/amlas/mon_ubuntu

// Volume
sudo docker volume create --name mydata
sudo docker volume inspect mydata   // détails sur le volume mydata ("Mountpoint": "/var/lib/docker/volumes/mydata/_data"  !!pas unique)
// Utiliser: "sudo find / -name "docker" | grep docker" pour localiser le dossier des volumes
sudo docker run --rm -it -v mydata:/c_mydata ubuntu   // --rm --> le container arrété va étre supprimé et le volume aussi.Pas de --name
// Créer un volume à partir d'un autre container
sudo docker run -it --name=container2 --volumes-from container1 ubuntu 

// Attention ---> pour localiser le volume dans la machine host, il faut passer par la commande : docker volume inspect ....
 Le volume n'est pas monté dans le répertoire courant, il est dans : /var/lib/docker/volumes

// Copier de fichiers entre host et container:
 - de host vers container -----> $ docker cp mon_fichier 8a25ca6914fa:/tmp   ---> (on utilise nom_du_container ou son ID)
 - du container vers host (pwd) -----> $ docker cp 8a25ca6914fa:/root/fichier.xt .  --->(les ":" sont obligatoires)
Copier un script bash (d'installation de packages) permet (après son execution) d'installer des mis à jour dans le container




