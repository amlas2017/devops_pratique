// Espace disque d'un noeud
[vagrant@server00 ~]$ ansible server01 -a "df -h"      -----> disque info.
[vagrant@server00 ~]$ ansible server01 -a "free -m"    -----> mémoire info.

// Playbook pour installer les dépendances (Centos)
---
- name: Installation du serveur
  hosts: all
  become: yes   # ou  remote_user: root
  tasks:
    - yum: name=epel-release state=latest   # ---->  Impossible d'installer htop sans cette ligne
    - name: Installation de dependances
      yum: name={{ item }} state=latest
      with_items:
       - vim
       - tree
       - htop
       - git
       - curl
       - wget
       - net-tools

// playbook pour gérer les users (groups , clé ssh , ...)
---
- hosts: all
  remote_user: root
  vars:
    user: amlas1
    groupes: gamlas
  tasks:
    - group:
        name: "{{groupes}}"
        state: present

    - name: Add the user {{user}}  # les " " ne sont pas demandés ici
      user:
        name: "{{user}}"        #   les  " " sont obligatoires ici
        shell: /bin/bash
        groups: "{{groupes}}"
        append: yes
    
    - name: générer clé ssh
      user:
        name: "{{user}}"
        generate_ssh_key: yes
        ssh_key_bits: 2048
        ssh_key_file: .ssh/id_rsa

// Les tags
Lorsque votre playbook est assez gros et que vous souhaitez en tester qu’une partie, vous n’allez pas jouer tout le playbook. 
Pour cela, vous allez une solution : les tags. Vous pouvez appliquer les tags à des plays ou des tasks (tâches). Ils s’utilisent de la manière suivante :
exemple:
---
...
- name: install nginx
        yum:
          name: nginx
          state: present
        tags:
          - installation
...          
          
----> ansible-playbook -i hosts deploy.yml --tags "installation"  
--> En jouant le playbook, on ne verra que la partie installation(la task « install nginx » taggé « installation » s'execute.


